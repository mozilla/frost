language: python
python:
  - "3.8"
sudo: required

install:
  - make install install-docs

script:
  - make black check_conftest_imports doctest coverage doc-build

deploy:
  provider: pages
  skip_cleanup: true
  github_token: $GITHUB_TOKEN
  keep_history: true
  local_dir: docs/_build/html/
  on:
    branch: master
